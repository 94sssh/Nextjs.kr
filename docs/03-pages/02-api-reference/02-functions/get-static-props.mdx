---
title: getStaticProps
description: `getStaticProps`를 위한 API 레퍼런스입니다. 'getStaticProps'를 사용하여 Next.js로 정적 페이지를 생성하는 방법에 대해 알아봅니다.
---

`getStaticProps`라는 함수를 내보내면 해당 함수에서 반환된 props를 사용하여 빌드 시 페이지를 미리 렌더링합니다.

```tsx filename="pages/index.tsx" switcher
import type { InferGetStaticPropsType, GetStaticProps } from 'next'

type Repo = {
  name: string
  stargazers_count: number
}

export const getStaticProps: GetStaticProps<{
  repo: Repo
}> = async () => {
  const res = await fetch('https://api.github.com/repos/vercel/next.js')
  const repo = await res.json()
  return { props: { repo } }
}

export default function Page({
  repo,
}: InferGetStaticPropsType<typeof getStaticProps>) {
  return repo.stargazers_count
}
```

```jsx filename="pages/index.js" switcher
export const getStaticProps = async () => {
  const res = await fetch('https://api.github.com/repos/vercel/next.js')
  const repo = await res.json()
  return { props: { repo } }
}

export default function Page({ repo }) {
  return repo.stargazers_count
}
```

`getStaticProps`에서 사용할 모듈을 최상위 스코프로 가져올 수 있습니다. 사용된 가져오기는 **클라이언트 측에서 번들링 되지 않습니다.** 즉, 데이터베이스에서 데이터를 가져오는 것을 포함하여 **서버측 코드를 'getStaticProps'에 직접 작성할 수 있습니다.**

## Context 매개변수

`context` 매개변수는 다음 키를 포함하는 객체입니다.

| Name            | Description                                                                                                                                                                                                                                                           |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `params`        | [동적 경로](/docs/pages/building-your-application/routing/dynamic-routes)를 사용하는 페이지의 경로 매개변수를 포함합니다. 예를 들어 페이지 이름이 `[id].js`인 경우 `params`는 `{ id: ... }`와 같이 표시됩니다. 나중에 설명할 `getStaticPaths`와 함께 사용해야 합니다. |
| `preview`       | (`draftMode`에서는 더 이상 사용되지 않습니다.) `preview`는 페이지가 [미리보기 모드](/docs/pages/building-your-application/configuring/preview-mode)이면 `true`이고 그렇지 않으면 `false`입니다.                                                                       |
| `previewData`   | (`draftMode`에서는 더 이상 사용되지 않습니다.) `setPreviewData`에 의해 설정된 [미리보기](/docs/pages/building-your-application/configuring/preview-mode) 데이터입니다.                                                                                                |
| `draftMode`     | `draftMode`는 페이지가 [드래프트 모드](docs/pages/building-your-application/configuring/draft-mode)이면 `true`이고 그렇지 않으면 `false`입니다.                                                                                                                       |
| `locale`        | 활성 로케일을 포함합니다. (사용 가능한 경우)                                                                                                                                                                                                                          |
| `locales`       | 지원되는 모든 로케일을 포함합니다. (사용 가능한 경우)                                                                                                                                                                                                                 |
| `defaultLocale` | 구성된 기본 로케일을 포함합니다. (사용 가능한 경우)                                                                                                                                                                                                                   |

## getStaticProps 반환 값

`getStaticProps` 함수는 `props`, `redirect`, `notFound` 중 하나의 속성과 **선택적인** `revalidate` 속성을 포함하는 객체를 반환해야 합니다.

### `props`

`props` 객체는 페이지 컴포넌트에서 각 값을 받는 key-값 쌍입니다. 전달된 모든 props가 [`JSON.stringify`](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)로 직렬화될 수 있도록 [직렬화 가능한 객체](https://developer.mozilla.org/en-US/docs/Glossary/Serialization)여야 합니다.

```jsx
export async function getStaticProps(context) {
  return {
    props: { message: `Next.js is awesome` }, // 페이지 컴포넌트에 props로 전달됩니다.
  }
}
```

### `revalidate`

`revalidate` 속성은 페이지를 다시 생성할 수 있는 시간(초)입니다. (기본값은 `false`이고 revalidation을 하지 않음)

```js
// 이 함수는 서버 측에서 빌드 시 호출됩니다.
// revalidation이 활성화되고 새 요청이 들어오면
// 서버리스 함수에서 다시 호출될 수 있습니다.
export async function getStaticProps() {
  const res = await fetch('https://.../posts')
  const posts = await res.json()

  return {
    props: {
      posts,
    },
    // 다음과 같은 경우, Next.js는 페이지를 다시 생성하려고 시도합니다.
    // - 요청이 들어올 때
    // - 최대 10초에 한 번
    revalidate: 10, // 초 단위
  }
}
```

[Incremental Static Regeneration](/docs/pages/building-your-application/data-fetching/incremental-static-regeneration)에 대해 자세히 알아보십시오.

ISR을 활용하는 페이지의 캐시 상태는 응답 헤더의 `x-nextjs-cache` 응답 헤더 값을 읽어 확인할 수 있습니다. 가능한 값은 다음과 같습니다.

- `MISS` - 경로가 캐시에 없음 (첫 번째 방문 시 최대 한 번 발생)
- `STALE` - 경로가 캐시에 있지만 revalidation 시간을 초과하여 백그라운드에서 업데이트됨
- `HIT` - 경로가 캐시에 있으며 revalidation 시간을 초과하지 않음

### `notFound`

The `notFound` boolean allows the page to return a `404` status and [404 Page](/docs/pages/building-your-application/routing/custom-error#404-page). With `notFound: true`, the page will return a `404` even if there was a successfully generated page before. This is meant to support use cases like user-generated content getting removed by its author. Note, `notFound` follows the same `revalidate` behavior [described here](#revalidate).

```js
export async function getStaticProps(context) {
  const res = await fetch(`https://.../data`)
  const data = await res.json()

  if (!data) {
    return {
      notFound: true,
    }
  }

  return {
    props: { data }, // will be passed to the page component as props
  }
}
```

> **Good to know**: `notFound` is not needed for [`fallback: false`](/docs/pages/api-reference/functions/get-static-paths#fallback-false) mode as only paths returned from `getStaticPaths` will be pre-rendered.

### `redirect`

The `redirect` object allows redirecting to internal or external resources. It should match the shape of `{ destination: string, permanent: boolean }`.

In some rare cases, you might need to assign a custom status code for older `HTTP` clients to properly redirect. In these cases, you can use the `statusCode` property instead of the `permanent` property, **but not both**. You can also set `basePath: false` similar to redirects in `next.config.js`.

```js
export async function getStaticProps(context) {
  const res = await fetch(`https://...`)
  const data = await res.json()

  if (!data) {
    return {
      redirect: {
        destination: '/',
        permanent: false,
        // statusCode: 301
      },
    }
  }

  return {
    props: { data }, // will be passed to the page component as props
  }
}
```

If the redirects are known at build-time, they should be added in [`next.config.js`](/docs/pages/api-reference/next-config-js/redirects) instead.

## Reading files: Use `process.cwd()`

Files can be read directly from the filesystem in `getStaticProps`.

In order to do so you have to get the full path to a file.

Since Next.js compiles your code into a separate directory you can't use `__dirname` as the path it returns will be different from the Pages Router.

Instead you can use `process.cwd()` which gives you the directory where Next.js is being executed.

```jsx
import { promises as fs } from 'fs'
import path from 'path'

// posts will be populated at build time by getStaticProps()
function Blog({ posts }) {
  return (
    <ul>
      {posts.map((post) => (
        <li>
          <h3>{post.filename}</h3>
          <p>{post.content}</p>
        </li>
      ))}
    </ul>
  )
}

// This function gets called at build time on server-side.
// It won't be called on client-side, so you can even do
// direct database queries.
export async function getStaticProps() {
  const postsDirectory = path.join(process.cwd(), 'posts')
  const filenames = await fs.readdir(postsDirectory)

  const posts = filenames.map(async (filename) => {
    const filePath = path.join(postsDirectory, filename)
    const fileContents = await fs.readFile(filePath, 'utf8')

    // Generally you would parse/transform the contents
    // For example you can transform markdown to HTML here

    return {
      filename,
      content: fileContents,
    }
  })
  // By returning { props: { posts } }, the Blog component
  // will receive `posts` as a prop at build time
  return {
    props: {
      posts: await Promise.all(posts),
    },
  }
}

export default Blog
```

## Version History

| Version   | Changes                                                                                                                                                               |
| --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `v13.4.0` | [App Router](/docs/app/building-your-application/data-fetching) is now stable with simplifed data fetching                                                            |
| `v12.2.0` | [On-Demand Incremental Static Regeneration](/docs/pages/building-your-application/data-fetching/incremental-static-regeneration#on-demand-revalidation) is stable.    |
| `v12.1.0` | [On-Demand Incremental Static Regeneration](/docs/pages/building-your-application/data-fetching/incremental-static-regeneration#on-demand-revalidation) added (beta). |
| `v10.0.0` | `locale`, `locales`, `defaultLocale`, and `notFound` options added.                                                                                                   |
| `v10.0.0` | `fallback: 'blocking'` return option added.                                                                                                                           |
| `v9.5.0`  | Stable [Incremental Static Regeneration](/docs/pages/building-your-application/data-fetching/incremental-static-regeneration)                                         |
| `v9.3.0`  | `getStaticProps` introduced.                                                                                                                                          |
